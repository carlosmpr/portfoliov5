---
// src/components/AboutMe.astro
---

<style>
    .animate-slide-up {
        opacity: 0;
        transform: translateY(30px);
        transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    }

    .animate-slide-up.is-visible {
        opacity: 1;
        transform: translateY(0);
    }

    .glass-card {
        border-radius: 16px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        background: rgba(38, 38, 38, 0.6);
        box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.06);
        backdrop-filter: blur(10px);
        transition: all 0.3s ease;
    }


    .about-link {
        transition: all 0.3s ease;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        padding: 12px 16px;
    }

    .about-link:hover {
        background: rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 255, 255, 0.2);
        transform: translateY(-2px);
    }

    /* Video stack container */
    .video-stack {
        position: relative;
        max-width: 320px;
        margin: 0 auto;
        height: 450px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .video-item {
        position: absolute;
        width: 280px;
        aspect-ratio: 9/16;
        border-radius: 16px;
        overflow: hidden;
        border: 1px solid rgba(255, 255, 255, 0.1);
        background: rgba(38, 38, 38, 0.6);
        box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.06);
        backdrop-filter: blur(10px);
        opacity: 0;
        transition: all 0.5s ease;
        z-index: 1;
    }


    .video-item.active {
        opacity: 1;
        z-index: 3;
        transform: scale(1);
    }

    .video-item:not(.active) {
        opacity: 0;
        transform: scale(0.9);
    }

    .video-item iframe {
        width: 100%;
        height: 100%;
        border: none;
    }

    /* Navigation buttons */
    .video-nav {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(38, 38, 38, 0.8);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 50%;
        width: 44px;
        height: 44px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
        z-index: 10;
        opacity: 0;
        backdrop-filter: blur(10px);
        box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.06);
    }

    .video-stack:hover .video-nav {
        opacity: 1;
    }

    .video-nav:hover {
        background: rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 255, 255, 0.2);
        transform: translateY(-50%) scale(1.1);
        box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 8px 25px -5px rgba(0, 0, 0, 0.3);
    }

    .video-nav.prev {
        left: -60px;
    }

    .video-nav.next {
        right: -60px;
    }

    .nav-icon {
        width: 18px;
        height: 18px;
        fill: rgba(255, 255, 255, 0.8);
        transition: all 0.3s ease;
    }

    .video-nav:hover .nav-icon {
        fill: white;
    }

    /* Video indicators */
    .video-indicators {
        position: absolute;
        bottom: -20px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 10px;
        z-index: 10;
        background: rgba(38, 38, 38, 0.8);
        border: 1px solid rgba(255, 255, 255, 0.1);
        padding: 8px 16px;
        border-radius: 20px;
        backdrop-filter: blur(10px);
        box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.06);
    }

    .indicator {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.3);
        cursor: pointer;
        transition: all 0.3s ease;
        border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .indicator:hover {
        background: rgba(255, 255, 255, 0.5);
        border-color: rgba(255, 255, 255, 0.2);
    }

    .indicator.active {
        background: rgba(255, 255, 255, 0.8);
        border-color: rgba(255, 255, 255, 0.3);
        transform: scale(1.2);
        box-shadow: 0 0 8px rgba(255, 255, 255, 0.3);
    }
</style>

<!-- About Me Section -->
<section class="pt-16 sm:pt-20  px-4 sm:px-6 bg-neutral-950 text-white" aria-labelledby="about-heading">
    <div class="max-w-7xl mx-auto">

        <div class="text-center mb-12">
            <div class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs text-white/70 mb-4">
                Personal story
            </div>
            <h2 id="about-heading" class="text-2xl sm:text-3xl font-light text-white mb-4">
                About Me
            </h2>
            <p class="text-white/70 leading-relaxed max-w-2xl mx-auto">
                Meet the developer behind the code and discover my journey in full-stack development and AI innovation.
            </p>
        </div>
        <!-- Single Glass Card with All Content -->
        <div class=" p-8 sm:p-12 animate-slide-up min-h-[600px] flex flex-col justify-center">
            <!-- Main Content Grid -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-16 items-center">
                <!-- Text Content -->
                <div class="space-y-6 text-white/70 leading-relaxed flex flex-col justify-center">
                    <p class="text-base sm:text-lg text-white/80 leading-relaxed">
                        I'm Carlos Polanco, a full-stack developer with 5+ years of experience specializing in React, Next.js, Python, Node.js, and AWS. From sleek UIs to backend automation and cloud deployments.
                    </p>
                    <p class="text-sm sm:text-base">
                        I've delivered real results for 15+ clients in finance, government, and hospitality—launching platforms that power thousands of users, streamline operations, and automate workflows.
                    </p>
                    <p class="text-sm sm:text-base">
                        <strong class="text-white">What sets me apart?</strong> I don't just code—I solve problems. I take business goals, turn them into technical plans, and build systems that work.
                    </p>
                    <p class="text-base sm:text-lg font-medium text-emerald-400">
                        Right now, I'm focused on integrating AI into business workflows and helping teams adopt emerging tech.
                    </p>
                    
                    <!-- Buttons with consistent styling -->
                    <div class="flex flex-col sm:flex-row gap-3 sm:gap-4 pt-4">
                        <a href="/about" class="project-tag text-white hover:text-blue-400 font-medium inline-flex items-center justify-center gap-2 px-6 py-3 rounded-full">
                            Learn More 
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                        </a>
                        <a href="/resume.pdf" class="project-tag text-white hover:text-emerald-400 font-medium inline-flex items-center justify-center gap-2 px-6 py-3 rounded-full">
                            Explore My Resume 
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                        </a>
                    </div>
                </div>

                <!-- Video Content -->
                <div class="flex items-center justify-center h-full">
                    <!-- Video Stack -->
                    <div class="video-stack" id="videoStack">
                        <!-- Video 1 -->
                        <div class="video-item active" data-video="0">
                            <iframe 
                                src="https://www.youtube.com/embed/jrOrugFSW8s?controls=0&modestbranding=1&rel=0&showinfo=0&fs=1&cc_load_policy=0&iv_load_policy=3&autohide=1" 
                                title="Carlos Polanco - Introduction" 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                allowfullscreen
                                loading="lazy">
                            </iframe>
                        </div>
                        
                        <!-- Video 2 -->
                        <div class="video-item" data-video="1">
                            <iframe 
                                src="https://www.youtube.com/embed/dQw4w9WgXcQ?controls=0&modestbranding=1&rel=0&showinfo=0&fs=1&cc_load_policy=0&iv_load_policy=3&autohide=1" 
                                title="Carlos Polanco - Development Process" 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                allowfullscreen
                                loading="lazy">
                            </iframe>
                        </div>
                        
                        <!-- Video 3 -->
                        <div class="video-item" data-video="2">
                            <iframe 
                                src="https://www.youtube.com/embed/oHg5SJYRHA0?controls=0&modestbranding=1&rel=0&showinfo=0&fs=1&cc_load_policy=0&iv_load_policy=3&autohide=1" 
                                title="Carlos Polanco - AI Projects" 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                allowfullscreen
                                loading="lazy">
                            </iframe>
                        </div>
                        
                        <!-- Navigation buttons -->
                        <button class="video-nav prev" id="prevBtn">
                            <svg class="nav-icon" viewBox="0 0 24 24">
                                <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                            </svg>
                        </button>
                        <button class="video-nav next" id="nextBtn">
                            <svg class="nav-icon" viewBox="0 0 24 24">
                                <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
                            </svg>
                        </button>
                        
                        <!-- Video indicators -->
                        <div class="video-indicators">
                            <div class="indicator active" data-video="0"></div>
                            <div class="indicator" data-video="1"></div>
                            <div class="indicator" data-video="2"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    // Video stack functionality
    function initVideoStack() {
        let currentVideo = 0;
        const videos = document.querySelectorAll('.video-item');
        const indicators = document.querySelectorAll('.indicator');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const totalVideos = videos.length;

        function updateVideoDisplay() {
            videos.forEach((video, index) => {
                video.classList.remove('active', 'prev');
                indicators[index].classList.remove('active');
                
                if (index === currentVideo) {
                    video.classList.add('active');
                    indicators[index].classList.add('active');
                } else if (index === currentVideo - 1 || (currentVideo === 0 && index === totalVideos - 1)) {
                    video.classList.add('prev');
                }
            });
        }

        function nextVideo() {
            currentVideo = (currentVideo + 1) % totalVideos;
            updateVideoDisplay();
        }

        function prevVideo() {
            currentVideo = (currentVideo - 1 + totalVideos) % totalVideos;
            updateVideoDisplay();
        }

        function goToVideo(index) {
            currentVideo = index;
            updateVideoDisplay();
        }

        // Event listeners
        if (nextBtn) nextBtn.addEventListener('click', nextVideo);
        if (prevBtn) prevBtn.addEventListener('click', prevVideo);
        
        indicators.forEach((indicator, index) => {
            indicator.addEventListener('click', () => goToVideo(index));
        });

        // Initialize display
        updateVideoDisplay();
    }

    // Simple slide-up animation on scroll for AboutMe
    function initAboutMeAnimations() {
        const elements = document.querySelectorAll('.animate-slide-up');
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                    observer.unobserve(entry.target); // Run animation only once
                }
            });
        }, {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        });

        elements.forEach((element) => {
            observer.observe(element);
        });
    }

    // Initialize when DOM is loaded
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => {
            initAboutMeAnimations();
            initVideoStack();
        });
    } else {
        initAboutMeAnimations();
        initVideoStack();
    }
</script>